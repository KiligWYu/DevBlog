<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Kilig çš„åšå®¢ | ä»£ç ä¹‹å¤–"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>Docker å¤‡å¿˜æ¸…å• | ğ•¶ğ–ğ–‘ğ–ğ–Œ'ğ–˜ ğ•­ğ–‘ğ–”ğ–Œ</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script src="https://www.googletagmanager.com/gtag/js?id=G-YLMXL0J5N0" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-YLMXL0J5N0');
</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 7.1.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Docker å¤‡å¿˜æ¸…å•</h1><a id="logo" href="/.">ğ•¶ğ–ğ–‘ğ–ğ–Œ'ğ–˜ ğ•­ğ–‘ğ–”ğ–Œ</a><p class="description">ä»£ç ä¹‹å¤–</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/categories/%E7%A2%8E%E5%91%A8%E6%8A%A5/"><i class="fa fa-envelope"> ç¢å‘¨æŠ¥</i></a><a href="/categories/Learn-in-Public/"><i class="fa fa-leanpub"> Learn in Public</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-4-4"><div class="content_container"><div class="post"><h1 class="post-title">Docker å¤‡å¿˜æ¸…å•</h1><div class="post-meta">2024-06-29</div><a class="disqus-comment-count" data-disqus-identifier="docker/" href="/docker/#disqus_thread"></a><div class="post-content"><ul>
<li><a href="#docker">Docker</a>
<ul>
<li><a href="#install-docker-engine-on-ubuntu">Install Docker Engine on Ubuntu</a></li>
</ul>
</li>
<li><a href="#install-docker-compose-plugin">Install Docker Compose Plugin</a></li>
<li><a href="#container">Container</a>
<ul>
<li><a href="#%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E8%BF%90%E8%A1%8C-nginx">åœ¨å®¹å™¨ä¸­è¿è¡Œ Nginx</a></li>
<li><a href="#%E9%80%9A%E8%BF%87-volumn-%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6">é€šè¿‡ Volumn å…±äº«æ–‡ä»¶</a></li>
</ul>
</li>
<li><a href="#image">Image</a>
<ul>
<li><a href="#%E6%9E%84%E5%BB%BA%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84-docker-%E9%95%9C%E5%83%8F">æ„å»ºä½ è‡ªå·±çš„ Docker é•œåƒ</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-dockerfile-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA">ä½¿ç”¨ Dockerfile è‡ªåŠ¨åŒ–é•œåƒæ„å»º</a>
<ul>
<li><a href="#%E6%9B%B4%E5%A4%9A-dockerfile-%E4%B8%AD%E7%9A%84%E5%91%BD%E4%BB%A4">æ›´å¤š Dockerfile ä¸­çš„å‘½ä»¤</a></li>
<li><a href="#%E6%8F%90%E4%BA%A4%E9%95%9C%E5%83%8F%E5%88%B0-docker-hub">æäº¤é•œåƒåˆ° Docker Hub</a></li>
</ul>
</li>
<li><a href="#network">Network</a></li>
<li><a href="#volume">Volume</a></li>
</ul>
</li>
<li><a href="#docker-compose">Docker Compose</a></li>
<li><a href="#%E5%8F%A6%E8%A7%81">å¦è§</a></li>
</ul>
<hr />
<p>å‰å‡ å¤©åœ¨ VPS(Virtual Private Servers) ä¸Šä½¿ç”¨ <a target="_blank" rel="noopener" href="https://www.docker.com">Docker</a> éƒ¨ç½²ä¸€äº›è‡ªç”¨æœåŠ¡ã€‚ä¹‹å‰å¯¹ Docker äº†è§£è¿‡ä¸€äº›ï¼Œé•¿æ—¶é—´ä¸ç”¨å®¹æ˜“é—å¿˜ï¼Œè¶æ­¤å†å¤ä¹ ä¸€ä¸‹ Dockerï¼Œè®°å½•åœ¨æ­¤å¤‡å¿˜æ¸…å•ã€‚</p>
<h2 id="docker"><a class="markdownIt-Anchor" href="#docker"></a> Docker</h2>
<p>macOS æœ¬åœ°çš„è¯æ¨è <a target="_blank" rel="noopener" href="https://orbstack.dev">OrbStack</a>ï¼Œè½»é‡ã€å¿«é€Ÿã€ç®€å•æ˜“ç”¨ã€‚<br />
Linux æœåŠ¡å™¨ä¸Šå®‰è£…ç…§å®˜æ–¹æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/">Install Docker Engine</a> å®‰è£…å³å¯ã€‚</p>
<p>ä¸‹é¢æ˜¯åœ¨ Ubuntu ä¸Šå®‰è£… Docker Engine çš„æ­¥éª¤ï¼ˆæ‘˜è‡ªå®˜æ–¹æ–‡æ¡£ï¼Œä½†æ”¹ç”¨äº† <code>apt</code> è€Œé <code>apt-get</code>ï¼‰ã€‚</p>
<h3 id="install-docker-engine-on-ubuntu"><a class="markdownIt-Anchor" href="#install-docker-engine-on-ubuntu"></a> Install Docker Engine on Ubuntu</h3>
<ol>
<li>
<p>Run the following command to uninstall all conflicting packages:</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="keyword">for</span> pkg <span class="keyword">in</span> docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; <span class="keyword">do</span> sudo apt remove <span class="variable">$pkg</span>; <span class="keyword">done</span></span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åœ¨æ–°ä¸»æœºä¸Šé¦–æ¬¡å®‰è£… Docker Engine å‰ï¼Œéœ€è¦é…ç½®ä¸‹ Docker  çš„ <code>apt</code> ä»“åº“ï¼š</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Add Docker<span class="string">&#x27;s official GPG key:</span></span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install ca-certificates curl</span><br><span class="line">sudo install -m 0755 -d /etc/apt/keyrings</span><br><span class="line">sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc</span><br><span class="line">sudo chmod a+r /etc/apt/keyrings/docker.asc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Add the repository to Apt sources:</span></span></span><br><span class="line">echo \</span><br><span class="line">  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \</span><br><span class="line"><span class="meta prompt_">  $</span><span class="language-bash"><span class="string">(. /etc/os-release &amp;&amp; echo &quot;$VERSION_CODENAME&quot;) stable&quot; | \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span></span></span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Install the latest version of Docker packages:</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Verify that the Docker Engine installation is successful by running the <code>hello-world</code> image.</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run hello-world</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="install-docker-compose-plugin"><a class="markdownIt-Anchor" href="#install-docker-compose-plugin"></a> Install Docker Compose Plugin</h2>
<p>å®‰è£…å®Œ Docker Engineï¼Œç»§ç»­å®‰è£… Docker Compose Pluginã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install docker-compose-plugin</span><br><span class="line"></span><br><span class="line"><span class="comment"># Verify that Docker Compose is installed correctly by checking the version.</span></span><br><span class="line"><span class="variable">$docker</span> compose version</span><br></pre></td></tr></table></figure>
<h2 id="container"><a class="markdownIt-Anchor" href="#container"></a> Container</h2>
<ul>
<li><code>docker run ubuntu:latest ls -l</code>:  æ‰§è¡Œä¸€ä¸ªæœ€æ–°ç‰ˆçš„ Ubuntu å®¹å™¨ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œè¿™æ¡å‘½ä»¤çš„æ—¶å€™ï¼Œç”±äºæœ¬åœ°è¿˜æ²¡æœ‰ Ubuntu æœ€æ–°ç‰ˆçš„å®‰è£…é•œåƒï¼Œå› æ­¤ Docker ä¼šè‡ªåŠ¨ä» Docker Hub ä¸Šä¸‹è½½ã€‚<code>ls -l</code> æ˜¯åœ¨ Ubuntu ä¸­æ‰§è¡Œçš„å‘½ä»¤ã€‚</li>
<li><code>docker ps</code>: æŸ¥çœ‹å½“å‰æ­£åœ¨æ‰§è¡Œçš„å®¹å™¨</li>
<li><code>docker ps -a</code>: æŸ¥çœ‹å½“å‰æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬æ­£åœ¨æ‰§è¡Œçš„å’Œå·²ç»ç»“æŸçš„ï¼‰</li>
<li><code>docker inspect [CONTAINER ID / NAMES]</code>: æŸ¥çœ‹å®¹å™¨é‡Œéƒ½æœ‰å“ªäº›å†…å®¹
<ul>
<li>åŒæ—¶ä½¿ç”¨ <code>jq</code> æ¥æ ¼å¼åŒ– JSON<br />
<br></li>
</ul>
</li>
<li><code>docker rm [CONTAINER ID / NAMES]</code>: åˆ é™¤å®¹å™¨</li>
<li><code>docker rm $(docker ps -aq)</code>: åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼Œ<code>-aq</code> æ˜¯ <code>-a</code> å’Œ <code>-q</code> çš„ç¼©å†™ï¼Œ<code>-q</code> æ˜¯è®© <code>docker ps</code> å‘½ä»¤åªæ˜¾ç¤ºå®¹å™¨ ID åˆ—è¡¨</li>
<li><code>docker run --rm ubuntu:latest ls -l</code>: æ¯æ¬¡æ‰§è¡Œå®Œä¸€ä¸ªå®¹å™¨ä¹‹åè‡ªåŠ¨åˆ é™¤å®¹å™¨<br />
<br></li>
<li><code>docker run -it ubuntu:latest bash</code>:â€œç™»å½•â€åˆ°æ­£åœ¨æ‰§è¡Œä¸­çš„å®¹å™¨ä¸­ï¼Œå’Œå®¹å™¨é‡Œè¿™ä¸ª bash äº¤äº’
<ul>
<li><code>-i</code> æ˜¯ interactiveï¼Œè¡¨ç¤ºæˆ‘ä»¬è¦å’Œå®¹å™¨äº¤äº’ï¼›</li>
<li><code>-t</code> æ˜¯ ttyï¼Œè®© docker åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç»ˆç«¯ï¼Œè¿™æ ·å°±èƒ½åœ¨å±å¹•ä¸Šçœ‹åˆ°æ¥è‡ªå®¹å™¨çš„æ§åˆ¶å°è¾“å‡ºäº†</li>
<li>æ‰§è¡Œ <code>$ exit</code> å¯ä»¥ç¦»å¼€ <code>bash</code>ã€‚Bash æ‰§è¡Œç»“æŸäº†ï¼Œå®¹å™¨ä¹Ÿå°±ç»“æŸäº†</li>
</ul>
</li>
<li><code>docker start [CONTAINER ID]</code>: é‡æ–°å¯åŠ¨ä¹‹å‰é€€å‡ºçš„å®¹å™¨ï¼Œå¯ä»¥ç”¨ <code>-i</code> å‚æ•°ä»¥äº¤äº’æ¨¡å¼æ¢å¤å®¹å™¨çš„æ‰§è¡Œ</li>
<li><code>docker stop [CONTAINER ID]</code>: åœæ­¢ä¸€ä¸ªåœ¨åå°æ‰§è¡Œçš„å®¹å™¨</li>
</ul>
<h3 id="åœ¨å®¹å™¨ä¸­è¿è¡Œ-nginx"><a class="markdownIt-Anchor" href="#åœ¨å®¹å™¨ä¸­è¿è¡Œ-nginx"></a> åœ¨å®¹å™¨ä¸­è¿è¡Œ Nginx</h3>
<ol>
<li>ä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ä¸€ä¸ªæ‰§è¡Œ bash çš„å®¹å™¨ï¼š<code>docker run -it -p 8080:80 ubuntu:latest bash</code>ï¼Œè¿™é‡Œï¼Œ<code>-p</code> å‚æ•°å¯ä»¥è®©æˆ‘ä»¬ç”¨ <code>host_port:container_port</code> çš„æ ¼å¼æŒ‡å®šå®¹å™¨å†…å¤–çš„ç«¯å£æ˜ å°„è§„åˆ™ï¼›</li>
<li>åœ¨ bash ä¸­æ‰§è¡Œ <code>apt update &amp;&amp; apt install -y nginx</code>ï¼›</li>
<li>å®‰è£…å®Œæˆåï¼Œå’Œæ™®é€šçš„ Ubuntu ä¸åŒçš„æ˜¯ï¼ŒNginx ä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œéœ€è¦æ‰‹å·¥æ‰§è¡Œä¸€ä¸‹ <code>$ nginx</code> å‘½ä»¤ã€‚ å†æ‰§è¡Œ <code>ps aux</code> å‘½ä»¤ï¼Œå°±èƒ½çœ‹åˆ° Nginx å·²ç»å¯åŠ¨äº†ï¼›</li>
<li>ç„¶åå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>http://localhost:8080</code> äº†ã€‚</li>
</ol>
<h3 id="é€šè¿‡-volumn-å…±äº«æ–‡ä»¶"><a class="markdownIt-Anchor" href="#é€šè¿‡-volumn-å…±äº«æ–‡ä»¶"></a> é€šè¿‡ Volumn å…±äº«æ–‡ä»¶</h3>
<p>åœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™ï¼Œä½¿ç”¨ <code>-v</code> å‚æ•°ï¼Œå¯ä»¥æŠŠ Host ä¸Šçš„æŸä¸ªç›®å½•æ˜ å°„åˆ°å®¹å™¨é‡Œã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å¤šä¸ª <code>-v</code> å‚æ•°ï¼Œæ¥ç»™å®¹å™¨æ·»åŠ å¤šä¸ªç›®å½•æ˜ å°„ã€‚</p>
<p>åœ¨ host ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª <code>/tmp/web</code> ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ª demo.html æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> /tmp/web</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;This is a web page from host.&quot;</span> &gt; /tmp/web/demo.html</span><br></pre></td></tr></table></figure>
<p>å®¹å™¨ä¸­çš„ Nginx é»˜è®¤çš„ web æ ¹ç›®å½•æ˜¯ <code>/var/www/html</code>ã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¯åŠ¨ dockerï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -p 8080:80 -v /tmp/web:/var/www/html ubuntu:latest bash</span><br></pre></td></tr></table></figure>
<p>é‡æ–°åœ¨å®¹å™¨é‡Œè¿è¡Œ Nginxï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt update &amp;&amp; apt install nginx -y</span><br><span class="line">$ nginx</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨æµè§ˆå™¨é‡Œå°±å¯ä»¥è®¿é—® <code>http://localhost:8080/demo.html</code> äº†ã€‚</p>
<h2 id="image"><a class="markdownIt-Anchor" href="#image"></a> Image</h2>
<ul>
<li><code>docker images</code>: æŸ¥çœ‹æœ¬åœ°å·²ç»å®‰è£…çš„ Docker é•œåƒ</li>
<li><code>docker rmi ubuntu:latest</code>: ä½¿ç”¨ <code>name:tag</code> çš„å½¢å¼æ¥åˆ é™¤æŒ‡å®šé•œåƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é•œåƒ ID</li>
<li><code>docker rmi $(docker images -q)</code>: ä½¿ç”¨é•œåƒ ID æ¥åˆ é™¤é•œåƒ</li>
</ul>
<h3 id="æ„å»ºä½ è‡ªå·±çš„-docker-é•œåƒ"><a class="markdownIt-Anchor" href="#æ„å»ºä½ è‡ªå·±çš„-docker-é•œåƒ"></a> æ„å»ºä½ è‡ªå·±çš„ Docker é•œåƒ</h3>
<p>ä»¥ä¸Šé¢åœ¨ Ubuntu é•œåƒä¸­è¿è¡Œ Nginx ä¸ºä¾‹ã€‚</p>
<ol>
<li>
<p><code>docker diff a33bf65c9623</code>: æŸ¥çœ‹å®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶å˜åŒ–</p>
</li>
<li>
<p><code>docker commit -a &quot;Kilig&quot; -m &quot;Install Nginx&quot; a33bf65c9623 kilig/nginx:0.1.0</code>: åƒ Git ä¸­æäº¤ä»£ç ä¸€æ ·ï¼Œå»æäº¤è¿™äº›å˜åŒ–</p>
<ul>
<li><code>-a</code> è¡¨ç¤º Authorï¼Œå³æäº¤è€…çš„å§“åï¼›</li>
<li><code>-m</code> è¡¨ç¤º Messageï¼Œå³æœ¬æ¬¡æäº¤çš„æ³¨é‡Šï¼›</li>
<li><code>a33bf65c9623</code>ï¼Œè¿™æ˜¯å®¹å™¨ IDï¼Œå®ƒè¡¨ç¤ºäº†æˆ‘ä»¬è¦åˆ¶ä½œçš„é•œåƒæœ€ç»ˆçš„çŠ¶æ€ï¼›</li>
<li><code>kilig/nginx:0.1.0</code>ï¼Œè¿™æ˜¯æ–°é•œåƒçš„åç§°ï¼Œä»¥åŠç‰ˆæœ¬å·ã€‚</li>
</ul>
</li>
<li>
<p>é‡æ–°æ‰§è¡Œ <code>docker images</code>ï¼Œå°±èƒ½çœ‹åˆ°æˆ‘ä»¬æ–°åˆ›å»ºçš„ nginx é•œåƒäº†</p>
<p>ä½†è¿è¡Œä¸€ä¸‹åˆšåˆ›å»ºçš„å®¹å™¨ <code>docker run -it -p 8080:80 kilig/nginx:0.1.0 nginx</code>ï¼Œå®¹å™¨æ‰§è¡Œä¸€ä¸‹å°±é€€å‡ºäº†ã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºå½“æˆ‘ä»¬æ‰§è¡Œ nginx å‘½ä»¤çš„æ—¶å€™ï¼Œä¼šå¯åŠ¨ä¸¤ç±»è¿›ç¨‹ï¼šé¦–å…ˆå¯åŠ¨çš„æ˜¯ä½œä¸ºç®¡ç†è°ƒåº¦çš„ master processï¼Œå®ƒç»§ç»­ç”Ÿæˆå®é™…å¤„ç† HTTP è¯·æ±‚çš„ worker processã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œmaster process æ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œå®ƒå¯åŠ¨ä¹‹åï¼Œå°±ä¼šæ–­æ‰å’Œè‡ªå·±çš„çˆ¶è¿›ç¨‹ä¹‹é—´çš„å…³è”ï¼Œäºæ˜¯ Docker å°±è·Ÿè¸ªä¸åˆ°äº†ï¼Œè¿›è€Œå®¹å™¨ä¹Ÿå°±ä¼šé€€å‡ºäº†ã€‚å› æ­¤ï¼Œè§£å†³çš„åŠæ³•ï¼Œå°±æ˜¯è®© Nginx çš„ master process ä¸è¦ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼Œè€Œæ˜¯ä»¥æ™®é€šæ¨¡å¼å¯åŠ¨å°±å¥½äº†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¾—ä¿®æ”¹ä¸‹ Nginx çš„é…ç½®æ–‡ä»¶ã€‚</p>
</blockquote>
<p>ä¿®æ­£ï¼š</p>
</li>
<li>
<p>ç”¨æˆ‘ä»¬æ–°åˆ›å»ºçš„é•œåƒï¼Œå¯åŠ¨ä¸€ä¸ªæ‰§è¡Œ Bash çš„å®¹å™¨ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it kilig/nginx:0.1.0 bash</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¿®æ”¹è¿™ä¸ªå®¹å™¨ä¸­ Nginx çš„é…ç½®æ–‡ä»¶ï¼Œå…³æ‰å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;daemon off;&quot;</span> &gt;&gt; /etc/nginx/nginx.conf</span><br><span class="line">$ <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é‡æ–°æäº¤ä¸€æ¬¡ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker commit -a <span class="string">&quot;Kilig&quot;</span> -m <span class="string">&quot;Turn off the daemon mode&quot;</span> 153a7b934628 kilig/nginx:0.1.1</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>docker history kilig/nginx:0.1.1</code>: å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„æäº¤è®°å½•</p>
</li>
<li>
<p>é‡æ–°æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¯åŠ¨ Nginxï¼š<code>docker run -it -p 8080:80 -d kilig/nginx:0.1.1 nginx</code><br />
è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† <code>-d</code> å‚æ•°ä½¿å®¹å™¨åœ¨åå°æ‰§è¡Œã€‚</p>
</li>
</ol>
<h3 id="ä½¿ç”¨-dockerfile-è‡ªåŠ¨åŒ–é•œåƒæ„å»º"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-dockerfile-è‡ªåŠ¨åŒ–é•œåƒæ„å»º"></a> ä½¿ç”¨ Dockerfile è‡ªåŠ¨åŒ–é•œåƒæ„å»º</h3>
<p>ä½¿ç”¨ Dockfile æŠŠæ‰“é€ é•œåƒçš„è¿‡ç¨‹æ”¾åœ¨ä¸€ä¸ªè„šæœ¬é‡Œï¼Œé¿å…æ˜“é”™çš„æ‰‹å·¥æ‰“é€ ï¼Œæé«˜æ•ˆç‡ï¼Œä¹Ÿä¾¿äºåˆ†äº«ã€‚<br />
<code>Dockerfile</code> æ˜¯ docker é»˜è®¤ä¼šä½¿ç”¨çš„æ–‡ä»¶åï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨æ‰§è¡Œ <code>docker run</code> çš„æ—¶å€™ä½¿ç”¨ <code>-f [filename]</code> å‚æ•°æ¥æŒ‡å®šå…¶ä»–æ–‡ä»¶åï¼Œä¸è¿‡ä¸€èˆ¬éƒ½ä¿æŒé»˜è®¤çš„ã€‚</p>
<ol>
<li>
<p>æ–°å»ºä¸€ä¸ª <code>/tmp/nginx</code> ç›®å½•ï¼Œåœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªå«åš <code>Dockerfile</code> çš„æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>åœ¨ Dockerfile ä¸­ï¼Œæ·»åŠ ä¸‹é¢å†…å®¹ï¼š</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">FROM</span> <span class="string">ubuntu:latest</span></span><br><span class="line"></span><br><span class="line"><span class="string">LABEL</span> <span class="string">maintainer=&quot;kilig</span> <span class="string">&lt;kilig@kilig.studio&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">RUN</span> <span class="string">apt</span> <span class="string">update</span> <span class="string">&amp;&amp;</span> <span class="string">apt</span> <span class="string">install</span> <span class="string">nginx</span> <span class="string">-y</span> <span class="string">\</span></span><br><span class="line">  <span class="string">&amp;&amp;</span> <span class="string">apt</span> <span class="string">clean</span> <span class="string">\</span></span><br><span class="line">  <span class="string">&amp;&amp;</span> <span class="string">rm</span> <span class="string">-rf</span> <span class="string">/var/lib/apt/lists/*</span> <span class="string">/tmp/*</span> <span class="string">/var/tmp/*</span> <span class="string">\</span></span><br><span class="line">  <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="string">&quot;daemon off;&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">/etc/nginx/nginx.conf</span></span><br><span class="line"></span><br><span class="line"><span class="string">CMD</span> [<span class="string">&quot;nginx&quot;</span>]</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„æ–‡ä»¶ï¼Œæ‰€æœ‰å¤§å†™å­—æ¯ï¼Œéƒ½æ˜¯ Dockerfile ä¸­çš„å‘½ä»¤ã€‚å…¶ä¸­ï¼š</p>
<ul>
<li><code>FROM</code> æŒ‡çš„æ˜¯æ„å»ºæ–°é•œåƒçš„åŸºç¡€ï¼Œè¿™é‡Œæˆ‘ä»¬è¦åŸºäº <code>ubuntu:latest</code> è¿™ä¸ªé•œåƒå®šåˆ¶è‡ªå·±çš„é•œåƒï¼›</li>
<li><code>LABEL</code> ç”¨äºå®šä¹‰ä¸€äº›å®¹å™¨çš„ metadataï¼›</li>
<li><code>RUN</code> ç”¨äºè®¾ç½®æ„å»ºæ–°é•œåƒçš„å„ç§åŠ¨ä½œã€‚åœ¨æ­¤ä¸€å…±æ‰§è¡Œäº† 4 ä¸ªåŠ¨ä½œï¼Œåˆ†åˆ«æ˜¯ï¼šå®‰è£… Nginxã€æ¸…ç†ä¸‹è½½å®‰è£…åŒ…ã€æ¸…é™¤ä¸´æ—¶æ–‡ä»¶ã€å…³é—­ Nginx å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† <code>&amp;&amp;</code> æŠŠè¿™ 4 ä¸ªåŠ¨ä½œå†™æˆäº†ä¸€ä¸ª <code>RUN</code> å‘½ä»¤ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨ä¸åŒçš„ <code>RUN</code> å‘½ä»¤åˆ†åˆ«æ‰§è¡Œè¿™äº›åŠ¨ä½œã€‚ä½œä¸ºä¸€ä¸ªæœ€ä½³å®è·µï¼Œåœ¨æ„å»ºä¸€ä¸ªæ–°é•œåƒæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½å‡å°‘ <code>RUN</code> å‘½ä»¤çš„ä½¿ç”¨æ¬¡æ•°ï¼Œè¿™æ ·å¯ä»¥å‡å°‘é•œåƒçš„å¤§å°ï¼›</li>
<li><code>CMD</code> ç”¨äºè®¾ç½®å®¹å™¨å¯åŠ¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ˜¾ç„¶ï¼Œæˆ‘ä»¬å°±æ˜¯è¦å¯åŠ¨ nginxã€‚</li>
</ul>
</li>
<li>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ„å»ºé•œåƒï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t kilig/nginx:0.1.2 .</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼š</p>
<ul>
<li>å½“æˆ‘ä»¬æ‰§è¡Œ <code>docker build</code> çš„æ—¶å€™ï¼Œdocker å°±ä¼šé»˜è®¤åœ¨å½“å‰ç›®å½•ä¸­ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªå«åš <code>Dockerfile</code> çš„æ–‡ä»¶åä½œä¸ºæ„å»ºè„šæœ¬ã€‚æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>-f filename</code> çš„å½¢å¼æŒ‡å®šæˆå…¶ä»–æ–‡ä»¶ï¼›</li>
<li><code>-t</code> ç”¨äºè®¾ç½®æ–°é•œåƒçš„åç§°å’Œ <code>TAG</code>ï¼›</li>
<li><code>.</code> ç”¨äºè®¾ç½®æ„å»ºé•œåƒæ—¶çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè¿™ä¸ªç¯å¢ƒä¸ä¸€å®šæ˜¯å½“å‰ç›®å½•ã€‚åœ¨ Dockerfile ä¸­ï¼Œæ‰€æœ‰çš„ç›¸å¯¹è·¯å¾„éƒ½ä¼šåŸºäºè¿™ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒæŒ‡å®šçš„ç›®å½•ã€‚</li>
</ul>
</li>
<li>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¯åŠ¨é•œåƒï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it -p 8080:80 kilig/nginx:0.1.2</span><br></pre></td></tr></table></figure>
<p>ç”±äº Dockfile ä¸­é€šè¿‡ <code>CMD</code> å‘½ä»¤è®¾ç½®äº†å®¹å™¨å¯åŠ¨çš„é»˜è®¤å‘½ä»¤ï¼Œåœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä¸ç”¨å†è®¾ç½®äº†ã€‚</p>
</li>
</ol>
<h4 id="æ›´å¤š-dockerfile-ä¸­çš„å‘½ä»¤"><a class="markdownIt-Anchor" href="#æ›´å¤š-dockerfile-ä¸­çš„å‘½ä»¤"></a> æ›´å¤š Dockerfile ä¸­çš„å‘½ä»¤</h4>
<ul>
<li><code>ARG</code> ç”¨äºå®šä¹‰åœ¨æ„å»ºé•œåƒæ—¶ä½¿ç”¨çš„å˜é‡ï¼›</li>
<li><code>ENV</code> ç”¨äºå®šä¹‰åœ¨æ„å»ºé•œåƒå’Œæ‰§è¡Œå®¹å™¨æ—¶ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ï¼›
<ul>
<li>æ‰§è¡Œå®¹å™¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ <code>-e</code> å‚æ•°ï¼Œä¿®æ”¹ç¯å¢ƒå˜é‡çš„å€¼</li>
</ul>
</li>
</ul>
<h4 id="æäº¤é•œåƒåˆ°-docker-hub"><a class="markdownIt-Anchor" href="#æäº¤é•œåƒåˆ°-docker-hub"></a> æäº¤é•œåƒåˆ° Docker Hub</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æäº¤é•œåƒåˆ° Docker Hub</span></span><br><span class="line">$ docker push kilig/nginx:0.1.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠé•œåƒä¸‹è½½å›æ¥</span></span><br><span class="line">$ docker pull kilig/nginx:0.1.2 </span><br></pre></td></tr></table></figure>
<h3 id="network"><a class="markdownIt-Anchor" href="#network"></a> Network</h3>
<ul>
<li><code>docker network -h</code> æŸ¥çœ‹å’Œç½‘ç»œç›¸å…³çš„å‘½ä»¤çš„ç”¨æ³•ã€‚</li>
</ul>
<p>Docker ä¸»è¦æ”¯æŒä¸¤ç§å½¢å¼çš„ç½‘ç»œï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><code>bridge mode</code>ï¼šè¿™å°±æ˜¯æˆ‘ä»¬åœ¨å•ä¸ª host ä¸Šæ‰§è¡Œå¤šä¸ªå®¹å™¨æ—¶ä½¿ç”¨çš„ç½‘ç»œï¼ŒåŒæ—¶ï¼Œä¹Ÿæ˜¯ Docker é»˜è®¤çš„ç½‘ç»œç±»å‹ï¼›</li>
<li><code>overlay mode</code>ï¼šè¿™æ˜¯åœ¨å¤šå° hosts ä¸Šéƒ¨ç½²å¤æ‚ç½‘ç»œç»“æ„æ—¶ä½¿ç”¨çš„ç½‘ç»œæ¨¡å¼ã€‚</li>
</ul>
<p>ä½¿ç”¨ Docker ä¸­çš„ç½‘ç»œï¼š</p>
<ol>
<li>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ª Docker ç½‘ç»œï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker network create --driver=bridge kilig-net</span><br></pre></td></tr></table></figure>
<p>Docker ä¼šç»™æˆ‘ä»¬è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥ç½‘ç»œçš„å“ˆå¸Œå€¼ã€‚</p>
</li>
<li>
<p>æŠŠæ‰€æœ‰ç›¸å…³çš„å®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œé€šè¿‡ <code>--network</code> é€‰é¡¹ï¼ŒåŠ å…¥åˆ° <code>kilig-net</code> ä¸­ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --network=kilig-net -p 80:80 -it --<span class="built_in">rm</span> kilig/nginx:0.1.2</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="volume"><a class="markdownIt-Anchor" href="#volume"></a> Volume</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --<span class="built_in">rm</span> -it -v /data busybox</span><br></pre></td></tr></table></figure>
<p><code>busybox</code> æ˜¯ä¸€ä¸ªæç®€çš„ Linuxï¼Œéå¸¸é€‚åˆç”¨æ¥è¯•éªŒä¸€äº›åŠŸèƒ½ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code>-v</code> çš„æ—¶å€™ï¼ŒåªæŒ‡å®šäº†ä¸€ä¸ªç›®å½• <code>/data</code>ï¼Œç„¶åå°±å¯ä»¥æŠŠ Linux ä¸­ä¸€äº›æœ‰å†™æ“ä½œçš„ç›®å½•ï¼Œç¬¦å·é“¾æ¥åˆ° <code>/data</code>ã€‚</p>
<p>é‚£ä¹ˆä½¿ç”¨ <code>-v /data</code> çš„æ—¶å€™ï¼Œå®é™…çš„æ–‡ä»¶ç©¶ç«Ÿå­˜åœ¨äº†å“ªå‘¢ï¼Ÿ</p>
<ol>
<li>æ‰§è¡Œ <code>docker volume ls</code>ï¼Œå¯ä»¥çœ‹åˆ° Docker ç»™è¿™ä¸ª data volume åˆ†é…äº†ä¸€ä¸ªå”¯ä¸€ IDï¼š<code>VOLUME NAME</code>ï¼›</li>
<li>æ‰§è¡Œ <code>docker volume inspect [VOLUME NAME]</code>ï¼Œåœ¨è¾“å‡ºçš„ä¿¡æ¯ä¸­ <code>Mountpoint</code> å°±æ˜¯ <code>/data</code> å®¹å™¨å®é™…ä¿å­˜çš„ç›®å½•ã€‚</li>
</ol>
<p>ä½†åœ¨ Mac æˆ–è€… Windows ä¸Šï¼Œè¿™ä¸ªç›®å½•å°±å¹¶ä¸æ˜¯ç›´æ¥åˆ›å»ºåœ¨ Host çš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ï¼Œè€Œæ˜¯åœ¨ Docker åˆ›å»ºçš„ä¸€ä¸ªè™šæ‹Ÿå±‚ä¸Šçš„ã€‚ä¸ºäº†çœ‹åˆ°è¿™ä¸ª volume å¯¹åº”çš„ç‰©ç†æ–‡ä»¶å¤¹ï¼š</p>
<ol>
<li>æˆ‘ä»¬æŠŠ Mac çš„ <code>/</code> æ˜ å°„åˆ°å®¹å™¨é‡Œçš„ <code>/vm-data</code> ç›®å½•ï¼š<code>$ docker run --rm -it -v /:/vm-data busybox</code>ï¼›</li>
<li>åœ¨å®¹å™¨é‡Œæ‰§è¡Œ <code>ls /vm-data/var/lib/docker/volumes/</code>ï¼Œå°±å¯ä»¥çœ‹åˆ° <code>/data</code> volume å®é™…å­˜å‚¨çš„ä½ç½®äº†ã€‚</li>
</ol>
<h2 id="docker-compose"><a class="markdownIt-Anchor" href="#docker-compose"></a> Docker Compose</h2>
<p>ä½¿ç”¨ Docker Compose ä¸€é”®éƒ¨ç½²å¼€å‘ç¯å¢ƒã€‚</p>
<ul>
<li><code>docker-compose.yml</code> æ˜¯ç¼–å†™çš„æ„å»ºè„šæœ¬ï¼Œæ–‡ä»¶åæ˜¯å›ºå®šçš„ï¼›</li>
<li>åŒçº§ç›®å½•ä¸‹ <code>.env</code> æ–‡ä»¶ç”¨æ¥å®šä¹‰ç¯å¢ƒå˜é‡ï¼›</li>
</ul>
<p>åœ¨ <code>docker-compose.yml</code> æ‰€åœ¨ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ <code>docker compose build</code> æ„å»ºé•œåƒï¼Œå†æ‰§è¡Œ <code>docker compose up -d</code>ï¼Œå°±å¯ä»¥å¯åŠ¨æœåŠ¡å¹¶åœ¨åå°è¿è¡Œäº†ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šdocker å¹¶ä¸ä¸€å®šä¼šæŒ‰ç…§ <code>docker-compose.yml</code> ä¸­ <code>services</code> çš„é¡ºåºå¯åŠ¨ï¼Œæ‰€ä»¥ä¸èƒ½ä¾èµ–è¿™ä¸ªå…³ç³»ã€‚</p>
<h2 id="å¦è§"><a class="markdownIt-Anchor" href="#å¦è§"></a> å¦è§</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com">Docker Docs</a></li>
<li><a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a></li>
<li><a target="_blank" rel="noopener" href="https://jqlang.github.io/jq/">jq</a></li>
<li><a target="_blank" rel="noopener" href="https://boxueio.com/categories/docker">Docker - æ³Šå­¦</a></li>
</ul>
</div><div class="tags"><a href="/tags/Docker"><i class="fa fa-tag">Docker</i></a></div><div class="post-nav"><a class="pre" href="/concurrency/">Concurrency å¤‡å¿˜æ¸…å•</a><a class="next" href="/combine/">Combine å¤‡å¿˜æ¸…å•</a></div><link rel="stylesheet" type="text/css" href="https://unpkg.com/disqusjs@1.3/dist/disqusjs.css"><script type="text/javascript" src="https://unpkg.com/disqusjs@1.3/dist/disqus.js"></script><script type="text/javascript" id="disqus-count-script">$(function() {
  var xhr = new XMLHttpRequest();
  xhr.open('GET', '//disqus.com/next/config.json', true);
  xhr.timeout = 2500;
  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
      $('.post-meta .post-comments-count').show();
      var s = document.createElement('script');
      s.id = 'dsq-count-scr';
      s.src = 'https://kiligwyu.disqus.com/count.js';
      s.async = true;
      (document.head || document.body).appendChild(s);
    }
  };
  xhr.ontimeout = function () { xhr.abort(); };
  xhr.send(null);
});</script><div class="comments" id="disqus_thread"><script type="text/javascript">// Load comments with DisqusJS
function loadComments() {
  window.dsqjs = new DisqusJS({
    shortname: 'kiligwyu',
    siteName: 'ğ•¶ğ–ğ–‘ğ–ğ–Œ\'ğ–˜ ğ•­ğ–‘ğ–”ğ–Œ',
    identifier: 'docker/',
    url: 'http://kiligwyu.com/docker/',
    title: 'Docker å¤‡å¿˜æ¸…å•',
    api: '',
    apikey: '',
    admin: 'kiligwyu',
    adminLabel: ''
  });
}
// Lazy load {# Credit: https://github.com/theme-next/hexo-theme-next/blob/master/layout/_third-party/comments/disqus.swig #}
(function () {
  var offsetTop = document.getElementById('disqus_thread').offsetTop - window.innerHeight;
  if (offsetTop <= 0) {
    // Load directly when there's no scrollbar
    window.addEventListener('load', loadComments, false);
  } else {
    var disqusScroll = function () {
      // offsetTop may changes because of manually resizing browser window or lazy loading images
      var offsetTop = document.getElementById('disqus_thread').offsetTop - window.innerHeight;
      var scrollTop = window.scrollY;

      // Pre-load comments a bit? (margin or anything else)
      if (offsetTop - scrollTop < 60) {
        window.removeEventListener('scroll', disqusScroll);
        loadComments();
      }
    };
    window.addEventListener('scroll', disqusScroll);
  }
})();
// Scroll to comments automatically if #comment-xxx anchor specified
window.addEventListener('load', function () {
  // I don't know why, it just works.
  window.setTimeout(function () {
    if (location.hash.indexOf('#comment-') !== -1) {
      document.getElementById('disqus_thread').scrollIntoView(true);
    }
  }, 100);
}, false);
</script></div></div></div></div><div class="pure-u-1 pure-u-md-4-4"><div id="footer">Copyright Â© 2024 <a href="/." rel="nofollow">ğ•¶ğ–ğ–‘ğ–ğ–Œ'ğ–˜ ğ•­ğ–‘ğ–”ğ–Œ.</a><br> è±« ICP å¤‡ 404 å· - 1
<br> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>